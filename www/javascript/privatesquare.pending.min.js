function privatesquare_pending_init(){var b=privatesquare_deferred_list();if(b.length==0)privatesquare_set_status("There are no pending checkins to administriviate.");else{var a="<optgroup>",c=function(d){var f=Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");d.getFullYear();var g=d.getDate();return f[d.getMonth()]+" "+g};for(var h in b){var e=b[h],i=new Date(e.created*1E3);a+='<option value="'+htmlspecialchars(e.id)+'">';a+=c(i)+' at "';a+=htmlspecialchars(e.venue);
a+='"</option>'}a+="</optgroup>";a+='<optgroup class="admin">';a+='<option value="__purge__">';a+=b.length>1?"Delete all pending checkins":"Just forget this checkin";a+="</option>";a+="</optgroup>";$("#checkins").html(a);a=$("#deferred");a.attr("data-count-pending",b.length);a.submit(privatesquare_pending_onselect);a.show()}}
function privatesquare_pending_onselect(){var b=$("#deferred"),a=$("#checkins"),c=a.val();if(c=="__purge__"){c="Are you sure you want to delete all those pending checkins?";if(b.attr("data-count-pending")==1)c="Are you sure you want to delete this checkin?";if(confirm(c)){a.html("");b.hide();privatesquare_deferred_purge();privatesquare_set_status("Okay all your pending checkins have been deleted.")}}else{a=privatesquare_deferred_get_by_id(c);privatesquare_fetch_venues(a.latitude,a.longitude,a.venue,
a.created);b.hide()}return false};
