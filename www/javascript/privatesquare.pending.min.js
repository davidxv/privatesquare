function privatesquare_pending_init(){var b=privatesquare_deferred_list();if(b.length==0)privatesquare_set_status("There are no pending checkins to administriviate.");else{var a="<optgroup>",g=function(c){var e=Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");c.getFullYear();var f=c.getDate();return e[c.getMonth()]+" "+f};for(var h in b){var d=b[h],i=new Date(d.created*1E3);a+='<option value="'+htmlspecialchars(d.id)+'">';a+=g(i)+' at "';a+=htmlspecialchars(d.venue);
a+='"</option>'}a+="</optgroup>";a+='<optgroup class="admin">';a+='<option value="__purge__">';a+=b.length>1?"Delete all pending checkins":"Just forget this checkin";a+="</option>";a+="</optgroup>";b=$("#checkins");b.attr("data-crumb","fixme");b.html(a);a=$("#deferred");a.submit(privatesquare_pending_onselect);a.show()}}
function privatesquare_pending_onselect(){var b=$("#checkins");b=b.val();if(b=="__purge__"){if(confirm("Are you sure you want to delete all those pending checkins?")){var a=$("#deferred");b=$("#checkins");b.html("");a.hide();privatesquare_deferred_purge();privatesquare_set_status("Okay all your pending checkins have been deleted.")}}else console.log(b);return false};
