function privatesquare_pending_init(){var a=privatesquare_deferred_list();if(a.length==0)privatesquare_set_status("There are no pending checkins to administriviate.");else{var b="<optgroup>",g=function(c){var e=Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");c.getFullYear();var f=c.getDate();return e[c.getMonth()]+" "+f};for(var h in a){var d=a[h],i=new Date(d.created*1E3);b+='<option value="'+htmlspecialchars(d.id)+'">';b+=g(i)+' at "';b+=htmlspecialchars(d.venue);
b+='"</option>'}b+="</optgroup>";b+='<optgroup class="admin">';b+='<option value="__purge__">';b+=a.length>1?"Delete all pending checkins":"Just forget this checkin";b+="</option>";b+="</optgroup>";$("#checkins").html(b);a=$("#deferred");a.submit(privatesquare_pending_onselect);a.show()}}
function privatesquare_pending_onselect(){var a=$("#checkins");a=a.val();if(a=="__purge__"){if(confirm("Are you sure you want to delete all those pending checkins?")){var b=$("#deferred");a=$("#checkins");a.html("");b.hide();privatesquare_deferred_purge();privatesquare_set_status("Okay all your pending checkins have been deleted.")}}else{console.log(a);a=privatesquare_deferred_get_by_id(a);console.log(a);privatesquare_fetch_venues(a.latitude,a.longitude,a.venue)}return false};
